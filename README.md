## App creation

Prerequisites for creating Azure resources
(https://developer.hashicorp.com/terraform/tutorials/azure-get-started/azure-build):
- Install Terraform
- Install Azure CLI tool
- Authenticate to Azure subscription (az login, az account set --subscription "<subscription-id>", etc..)
- Create a Service Principal ?
- Github token - need to be generated and provided by Ori, repository owner.
The Github token is used to connect the Azure Web App to the Github repository for the CI/CD using Github Actions.


Run:
```
bash deploy_infra.sh <Github_auth_token>
```

This will create the necessary Azure resources using Terraform.


Upon the Azure Web App resource creation, a pipeline will be automatically triggered by Github to deploy the source code on it.
Once the pipeline is finished, the app will be ready to use.



## App usage

GET request to `/restaurants` route with a subset of the following parameters:
- name
- style
- vegetarian (yes / no)
- doesDeliveries (yes / no)
- openAt (time format of "HH:MM")

E.g.
- *"restaurantapp123.azurewebsites.net/restaurants?vegetarian=yes&style=Italian&openAt=15:30"*
- _"restaurantapp123.azurewebsites.net/restaurants?doesDeliveries=yes&openAt=22:00"_
- _"restaurantapp123.azurewebsites.net/restaurants?name=Cafe+Cafe"_



## App deletion

Navigate to terraform/ directory and execute `terraform destroy -auto-approve`,
or simply delete the resource group.

During web app creation, the below items will be generated by Azure in the Github repository,
and need to be deleted from the Repository when deleting the app:
- A secret called "AZUREAPPSERVICE_PUBLISHPROFILE_<...>"
- A workflow file ("main_<app_name>.yml") under .github/workflows/ directory
